(this["webpackJsonpreact-balancer"]=this["webpackJsonpreact-balancer"]||[]).push([[0],{111:function(e,t,a){e.exports=a(235)},235:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(51),l=a.n(o),c=a(7),s=a(17),i=Object(s.a)(),p=a(8),u=a(9),d=a(12),m=a(11),h=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui center aligned inverted bottom attached header"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/DavisRamsey"},r.a.createElement("i",{className:"large twitter icon"})),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/davis-ramsey"},r.a.createElement("i",{className:"large github icon"})),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"mailto:davis.ramsey@gmail.com"},r.a.createElement("i",{className:"large at icon"})))}}]),a}(r.a.Component),f=a(10),b=a(52),v=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"renderHeaderTable",value:function(){if(this.props.prices["0xba100000625a3754423978a60c9317c58a424e3d"]&&this.props.sumAdjLiq>140683236)return r.a.createElement("tr",{key:"first"},r.a.createElement("td",{className:"center aligned","data-label":"BAL Price"},"$",this.props.prices["0xba100000625a3754423978a60c9317c58a424e3d"].usd.toFixed(2)),r.a.createElement("td",{className:"center aligned","data-label":"Total Volume"},"$",Number(this.props.sumVol.toFixed(0)).toLocaleString()),r.a.createElement("td",{className:"center aligned","data-label":"Total Liquidity"},"$",Number(this.props.sumTotalLiq.toFixed(0)).toLocaleString()),r.a.createElement("td",{className:"center aligned","data-label":"Total Adj. Liquidity"},"$",Number(this.props.sumAdjLiq.toFixed(0)).toLocaleString()))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{className:"ui grid centered"},r.a.createElement("table",{className:"ui collapsing padded inverted celled table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"center aligned"},"BAL Price"),r.a.createElement("th",{className:"center aligned"},"Total Volume"),r.a.createElement("th",{className:"center aligned"},"Total Liquidity"),r.a.createElement("th",{className:"center aligned"},"Total Adj. Liquidity"))),r.a.createElement("tbody",null,this.renderHeaderTable())),r.a.createElement("br",null)))}}]),a}(r.a.Component),E=Object(f.b)((function(e){return{sumAdjLiq:e.sumLiq,sumTotalLiq:e.sumTotalLiq,sumVol:e.sumVol,prices:e.coingecko}}))(v),g=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"renderPortfolioButton",value:function(){return 0!==this.props.portfolio.length?r.a.createElement(b.a,{to:"/portfolio/".concat(this.props.portfolio.filter((function(e){return""!==e&&null!==e}))),className:"ui button animated left aligned primary"},r.a.createElement("div",{className:"visible content center"},"Portfolio"),r.a.createElement("div",{className:"hidden content"},"View Selected Pools")):null}},{key:"renderMenu",value:function(){return r.a.createElement("div",{className:"five ui buttons header"},this.renderPortfolioButton(),r.a.createElement("div",{className:"ui animated secondary button"},r.a.createElement("div",{className:"ui avatar image visible content"},r.a.createElement("img",{alt:"grug stack rock",src:"https://i.imgur.com/87YWwgq.png"})),r.a.createElement("div",{className:"ui hidden content"},"Grug stack rock")),r.a.createElement("div",{className:"ui animated secondary button"},r.a.createElement("div",{className:"ui avatar image visible content"},r.a.createElement("img",{alt:"graph",src:"https://i.imgur.com/90yffKg.png"})),r.a.createElement("div",{className:"hidden content"},"Built using The Graph Protocol")),r.a.createElement("div",{className:"ui animated secondary button"},r.a.createElement("div",{className:"ui avatar image visible content"},r.a.createElement("img",{alt:"coingecko",src:"https://i.imgur.com/EbNy23a.png"})),r.a.createElement("div",{className:"hidden content"},"Powered by CoinGecko API")),r.a.createElement(b.a,{to:"/",className:"ui button animated right aligned primary"},r.a.createElement("div",{className:"visible content"},"All Pools"),r.a.createElement("div",{className:"hidden content"},"View All Pools")))}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderMenu(),r.a.createElement("div",{className:"ui inverted horizontal divider"},"Page Last Refreshed: ",Date()),r.a.createElement("div",{className:"ui black compact message"},"For the official Balancer Pool interface, please visit",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://pools.balancer.exchange/#/"}," ","https://pools.balancer.exchange/#/"),r.a.createElement("br",null),"Click the button to add or remove a pool from your selected pools. To view only selected pools, click the Portfolio button. To view all pools, click the All Pools button. Clicking in the Assets column will show more info about that pool's assets. Prices are automatically updated every 5 minutes. Note: APY is calculated using 24h fee yield extrapolated to an annualized rate plus yield on weekly BAL distributions. WrapFactor and CapFactor are currently NOT included in the calculations, so Annual BAL and APY may not be 100% accurate."),r.a.createElement(E,null))}}]),a}(r.a.Component),w=Object(f.b)((function(e){return{portfolio:e.portfolio,prices:e.coingecko}}))(g),y=a(13),N=a.n(y),L=a(15),O=a(22),k=a(39),P=a(33),M=a.n(P),j=M()({url:"https://api.thegraph.com/subgraphs/name/balancer-labs/balancer",method:"post",data:{query:"{\n      pools (first: 1000, skip: 0, where: {publicSwap: true},orderBy: liquidity, orderDirection: desc) {\n        id\n       publicSwap\n       finalized\n       swapFee\n       totalWeight\n       totalShares\n       totalSwapVolume\n       tokensList\n       tokens {\n         id\n         address\n         balance\n         decimals\n         symbol\n         denormWeight\n       }\n       shares {\n        id\n        userAddress {\n          id\n        }\n        balance\n      }\n       swaps (first: 1,orderBy: timestamp,orderDirection: desc, where: {timestamp_lt: ".concat(Math.floor(Date.now()/1e3)-86400,"}) {\n         tokenIn\n         tokenInSym\n         tokenAmountIn\n         tokenOut\n         tokenOutSym\n         tokenAmountOut\n         poolTotalSwapVolume\n       }\n     }\n   }")}}),A=M.a.create({baseURL:"https://api.coingecko.com/api/v3/simple/token_price"}),x=function(e){return function(t){t({type:"SELECT_POOL",payload:e})}},F=function(e){return function(t){t({type:"DELETE_POOL",payload:e})}},T=function(){return function(e){e({type:"DELETE_POOLS"})}},S=function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M()({url:"https://api.thegraph.com/subgraphs/name/balancer-labs/balancer",method:"post",data:{query:'{\n          pools (where: {id: "'.concat(e.toLowerCase(),'"}, orderBy: liquidity, orderDirection: desc) {\n            id\n\t\t\t\t\t swapFee\n\t\t\t\t\t totalShares\n           totalWeight\n           totalSwapVolume\n           tokens {\n             id\n             address\n             balance\n             decimals\n             symbol\n             denormWeight\n\t\t\t\t\t }\n\t\t\t\t\t shares {\n\t\t\t\t\t\tid\n\t\t\t\t\t\tpoolId {\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t}\n\t\t\t\t\t\tuserAddress {\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbalance\n\t\t\t\t\t}\n           swaps (first: 1,orderBy: timestamp,orderDirection: desc, where: {timestamp_lt: ').concat(Math.floor(Date.now()/1e3)-86400,"}) {\n             poolTotalSwapVolume\n           }\n         }\n       }")}});case 2:n=t.sent,a({type:"FETCH_POOL",payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},q=function(e){return Math.exp(-Math.pow(50*e,2))},_=function(e){var t,a=[],n=Object(L.a)(e.tokens);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.push(r.denormWeight/e.totalWeight)}}catch(o){n.e(o)}finally{n.f()}return 2===a.length?a[0]*a[1]*4*a[0]*a[1]/(a[0]*a[1]):3===a.length?(Math.pow(a[2]*a[1]*2/(a[2]+a[1]),2)+Math.pow(a[2]*a[0]*2/(a[2]+a[0]),2)+Math.pow(a[1]*a[0]*2/(a[1]+a[0]),2))/(a[2]*a[1]+a[2]*a[0]+a[1]*a[0]):4===a.length?(Math.pow(a[2]*a[1]*2/(a[2]+a[1]),2)+Math.pow(a[2]*a[0]*2/(a[2]+a[0]),2)+Math.pow(a[1]*a[0]*2/(a[1]+a[0]),2)+Math.pow(a[3]*a[0]*2/(a[3]+a[0]),2)+Math.pow(a[3]*a[1]*2/(a[3]+a[1]),2)+Math.pow(a[3]*a[2]*2/(a[3]+a[2]),2))/(a[2]*a[1]+a[2]*a[0]+a[1]*a[0]+a[3]*a[0]+a[3]*a[1]+a[3]*a[2]):5===a.length?(Math.pow(a[2]*a[1]*2/(a[2]+a[1]),2)+Math.pow(a[2]*a[0]*2/(a[2]+a[0]),2)+Math.pow(a[1]*a[0]*2/(a[1]+a[0]),2)+Math.pow(a[3]*a[0]*2/(a[3]+a[0]),2)+Math.pow(a[3]*a[1]*2/(a[3]+a[1]),2)+Math.pow(a[3]*a[2]*2/(a[3]+a[2]),2)+Math.pow(a[4]*a[3]*2/(a[4]+a[3]),2)+Math.pow(a[4]*a[2]*2/(a[4]+a[2]),2)+Math.pow(a[4]*a[1]*2/(a[4]+a[1]),2)+Math.pow(a[4]*a[0]*2/(a[4]+a[0]),2))/(a[2]*a[1]+a[2]*a[0]+a[1]*a[0]+a[3]*a[0]+a[3]*a[1]+a[3]*a[2]+a[4]*a[3]+a[4]*a[2]+a[4]*a[1]+a[4]*a[0]):6===a.length?(Math.pow(a[2]*a[1]*2/(a[2]+a[1]),2)+Math.pow(a[2]*a[0]*2/(a[2]+a[0]),2)+Math.pow(a[1]*a[0]*2/(a[1]+a[0]),2)+Math.pow(a[3]*a[0]*2/(a[3]+a[0]),2)+Math.pow(a[3]*a[1]*2/(a[3]+a[1]),2)+Math.pow(a[3]*a[2]*2/(a[3]+a[2]),2)+Math.pow(a[4]*a[3]*2/(a[4]+a[3]),2)+Math.pow(a[4]*a[2]*2/(a[4]+a[2]),2)+Math.pow(a[4]*a[1]*2/(a[4]+a[1]),2)+Math.pow(a[4]*a[0]*2/(a[4]+a[0]),2)+Math.pow(a[5]*a[4]*2/(a[5]+a[4]),2)+Math.pow(a[5]*a[3]*2/(a[5]+a[3]),2)+Math.pow(a[5]*a[2]*2/(a[5]+a[2]),2)+Math.pow(a[5]*a[1]*2/(a[5]+a[1]),2)+Math.pow(a[5]*a[0]*2/(a[5]+a[0]),2))/(a[2]*a[1]+a[2]*a[0]+a[1]*a[0]+a[3]*a[0]+a[3]*a[1]+a[3]*a[2]+a[4]*a[3]+a[4]*a[2]+a[4]*a[1]+a[4]*a[0]+a[5]*a[4]+a[5]*a[3]+a[5]*a[2]+a[5]*a[1]+a[5]*a[0]):7===a.length?(Math.pow(a[2]*a[1]*2/(a[2]+a[1]),2)+Math.pow(a[2]*a[0]*2/(a[2]+a[0]),2)+Math.pow(a[1]*a[0]*2/(a[1]+a[0]),2)+Math.pow(a[3]*a[0]*2/(a[3]+a[0]),2)+Math.pow(a[3]*a[1]*2/(a[3]+a[1]),2)+Math.pow(a[3]*a[2]*2/(a[3]+a[2]),2)+Math.pow(a[4]*a[3]*2/(a[4]+a[3]),2)+Math.pow(a[4]*a[2]*2/(a[4]+a[2]),2)+Math.pow(a[4]*a[1]*2/(a[4]+a[1]),2)+Math.pow(a[4]*a[0]*2/(a[4]+a[0]),2)+Math.pow(a[5]*a[4]*2/(a[5]+a[4]),2)+Math.pow(a[5]*a[3]*2/(a[5]+a[3]),2)+Math.pow(a[5]*a[2]*2/(a[5]+a[2]),2)+Math.pow(a[5]*a[1]*2/(a[5]+a[1]),2)+Math.pow(a[5]*a[0]*2/(a[5]+a[0]),2)+Math.pow(a[6]*a[5]*2/(a[6]+a[5]),2)+Math.pow(a[6]*a[4]*2/(a[6]+a[4]),2)+Math.pow(a[6]*a[3]*2/(a[6]+a[3]),2)+Math.pow(a[6]*a[2]*2/(a[6]+a[2]),2)+Math.pow(a[6]*a[1]*2/(a[6]+a[1]),2)+Math.pow(a[6]*a[0]*2/(a[6]+a[0]),2))/(a[2]*a[1]+a[2]*a[0]+a[1]*a[0]+a[3]*a[0]+a[3]*a[1]+a[3]*a[2]+a[4]*a[3]+a[4]*a[2]+a[4]*a[1]+a[4]*a[0]+a[5]*a[4]+a[5]*a[3]+a[5]*a[2]+a[5]*a[1]+a[5]*a[0]+a[6]*a[5]+a[6]*a[4]+a[6]*a[3]+a[6]*a[2]+a[6]*a[1]+a[6]*a[0]):8===a.length?(Math.pow(a[2]*a[1]*2/(a[2]+a[1]),2)+Math.pow(a[2]*a[0]*2/(a[2]+a[0]),2)+Math.pow(a[1]*a[0]*2/(a[1]+a[0]),2)+Math.pow(a[3]*a[0]*2/(a[3]+a[0]),2)+Math.pow(a[3]*a[1]*2/(a[3]+a[1]),2)+Math.pow(a[3]*a[2]*2/(a[3]+a[2]),2)+Math.pow(a[4]*a[3]*2/(a[4]+a[3]),2)+Math.pow(a[4]*a[2]*2/(a[4]+a[2]),2)+Math.pow(a[4]*a[1]*2/(a[4]+a[1]),2)+Math.pow(a[4]*a[0]*2/(a[4]+a[0]),2)+Math.pow(a[5]*a[4]*2/(a[5]+a[4]),2)+Math.pow(a[5]*a[3]*2/(a[5]+a[3]),2)+Math.pow(a[5]*a[2]*2/(a[5]+a[2]),2)+Math.pow(a[5]*a[1]*2/(a[5]+a[1]),2)+Math.pow(a[5]*a[0]*2/(a[5]+a[0]),2)+Math.pow(a[6]*a[5]*2/(a[6]+a[5]),2)+Math.pow(a[6]*a[4]*2/(a[6]+a[4]),2)+Math.pow(a[6]*a[3]*2/(a[6]+a[3]),2)+Math.pow(a[6]*a[2]*2/(a[6]+a[2]),2)+Math.pow(a[6]*a[1]*2/(a[6]+a[1]),2)+Math.pow(a[6]*a[0]*2/(a[6]+a[0]),2)+Math.pow(a[7]*a[6]*2/(a[7]+a[6]),2)+Math.pow(a[7]*a[5]*2/(a[7]+a[5]),2)+Math.pow(a[7]*a[4]*2/(a[7]+a[4]),2)+Math.pow(a[7]*a[3]*2/(a[7]+a[3]),2)+Math.pow(a[7]*a[2]*2/(a[7]+a[2]),2)+Math.pow(a[7]*a[1]*2/(a[7]+a[1]),2)+Math.pow(a[7]*a[0]*2/(a[7]+a[0]),2))/(a[2]*a[1]+a[2]*a[0]+a[1]*a[0]+a[3]*a[0]+a[3]*a[1]+a[3]*a[2]+a[4]*a[3]+a[4]*a[2]+a[4]*a[1]+a[4]*a[0]+a[5]*a[4]+a[5]*a[3]+a[5]*a[2]+a[5]*a[1]+a[5]*a[0]+a[6]*a[5]+a[6]*a[4]+a[6]*a[3]+a[6]*a[2]+a[6]*a[1]+a[6]*a[0]+a[7]*a[6]+a[7]*a[5]+a[7]*a[4]+a[7]*a[3]+a[7]*a[2]+a[7]*a[1]+a[7]*a[0]):void 0},V=["lightslategray","darkorange","teal","forestgreen","crimson","orchid","steelblue","darkmagenta"],C=["0xba100000625a3754423978a60c9317c58a424e3d","0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","0x4ddc2d193948926d02f9b1fe9e1daa0718270ed5","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","0x39aa39c021dfbae8fac545936693ac917d5e7563","0xe2f2a5c287993345a840db3b0845fbc70f5935a5","0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2","0x6b175474e89094c44da98b954eedeac495271d0f","0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","0x2260fac5e5542a773aa44fbcfedf7c193bc2c599","0xC11b1268C1A384e55C48c2391d8d480264A3A7F4","0xb4efd85c19999d84251304bda99e90b92300bd93"],D=["white","pink","pink","olive","olive","goldenrod","aquamarine","yellow","yellow","blue","blue","palegreen"],I=function(e){var t,a=[],n=Object(L.a)(e.tokens);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=(100*(r.denormWeight/e.totalWeight)).toFixed(2)+"%";a.push(o+" "+r.symbol)}}catch(l){n.e(l)}finally{n.f()}return a},B=function(e){var t=[],a=[];return e.tokens.forEach((function(n,r){var o=V.filter((function(e){return-1===a.indexOf(e)})),l=Math.floor(Math.random()*o.length),c=null;c=-1!==C.indexOf(n.address)?D[C.findIndex((function(e){return e===n.address}))]:o[l],a.push(c);var s=n.denormWeight/e.totalWeight,i=parseFloat((100*s).toFixed(2)),p={title:n.symbol,value:i,color:c};t.push(p)})),t},U=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=0,o=Object(L.a)(e.tokens);try{for(o.s();!(a=o.n()).done;){var l=a.value,c=l.address;if(void 0===t||void 0===t[c])return"No Data";var s=t[c].usd,i=parseFloat(l.balance);r+=s*i}}catch(p){o.e(p)}finally{o.f()}return isNaN(r)?"No Data":(r*=n,Number(r.toFixed(2)).toLocaleString())},$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=e.totalSwapVolume;if(void 0===e.swaps[0])return 0;var n=e.swaps[0].poolTotalSwapVolume,r=(a-n)*t;return Number(r.toFixed(2)).toLocaleString()},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=e.totalSwapVolume;if(void 0===e.swaps[0])return 0;var n=e.swaps[0].poolTotalSwapVolume,r=a-n,o=r*e.swapFee*t;return Number(o.toFixed(2)).toLocaleString()},W=function(e){return q(e.swapFee)*_(e)},Y=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=W(e),o=U(e,t).split(",").join("");return isNaN(o/a*14500)?0:o*r/a*145e3*52*n},H=function(e,t,a){var n=U(e,t).split(",").join("");if(isNaN(n/a*14500))return 0;var r=Y(e,t,a),o=365*parseFloat(z(e,t)),l=t["0xba100000625a3754423978a60c9317c58a424e3d"].usd;return(parseFloat(r*l/n*100)+o).toFixed(2)},Q=function(e,t){var a,n=0,r=Object(L.a)(e.tokens);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=o.address;if(void 0===t[l])return 0;n+=t[l].usd*parseFloat(o.balance)}}catch(c){r.e(c)}finally{r.f()}return Number(n.toFixed(2)).toLocaleString()},z=function(e,t){var a=e.totalSwapVolume;if(void 0===e.swaps[0])return"0";var n,r=(a-e.swaps[0].poolTotalSwapVolume)*e.swapFee,o=0,l=Object(L.a)(e.tokens);try{for(l.s();!(n=l.n()).done;){var c=n.value,s=c.address;if(void 0===t)return"0";o+=t[s].usd*parseFloat(c.balance)}}catch(p){l.e(p)}finally{l.f()}var i=r/o*100;return isNaN(i)?"0":i.toFixed(4)},G=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(N.a.mark((function e(){var t,a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.portfolio.split(","),a=Object(L.a)(t),e.prev=2,a.s();case 4:if((n=a.n()).done){e.next=11;break}return r=n.value,e.next=8,this.props.fetchPool(r);case 8:this.props.selectPool(r);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.e(e.t0);case 16:return e.prev=16,a.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.deletePools()}},{key:"renderTable",value:function(){var e=this;return this.props.portfolio.split(",").map((function(t){if(-1===e.props.checkPortfolio.indexOf(t))return null;var a=e.props.pools[t];return a&&e.props.prices&&e.props.portfolio&&e.props.sumLiq>138683236?0!==parseInt(Q(a,e.props.prices))?r.a.createElement("tr",{key:a.id},r.a.createElement("td",{className:"center aligned","data-label":"Pool Address"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://pools.balancer.exchange/#/pool/".concat(a.id)},r.a.createElement("button",{className:"ui small inverted floating compact centered button"},"...",a.id.slice(-8))),r.a.createElement("button",{onClick:function(){return e.props.deletePool(a.id)},className:"ui small inverted floating compact centered button"},"Remove")),r.a.createElement("td",{onClick:function(){return i.push("/pool/".concat(a.id))},className:"center aligned","data-label":"Assets"},r.a.createElement(k.PieChart,{className:"ui tiny circular image",data:B(a),onClick:function(){return i.push("/pool/".concat(a.id))}}),r.a.createElement("i",{className:"icon long arrow alternate right"}),I(a).join("  ")),r.a.createElement("td",{className:"center aligned","data-label":"Swap Fee"},(100*a.swapFee).toFixed(2),"%"),r.a.createElement("td",{className:"center aligned","data-label":"Total Liquidity"},"$",U(a,e.props.prices)),r.a.createElement("td",{className:"center aligned","data-label":"24h Volume"},"$",$(a)),r.a.createElement("td",{className:"center aligned","data-label":"24h Fees"},"$",R(a)),r.a.createElement("td",{className:"center aligned","data-label":"Annual BAL"},Number(Y(a,e.props.prices,e.props.sumLiq).toFixed(0)).toLocaleString()),r.a.createElement("td",{className:"center aligned","data-label":"APY"},H(a,e.props.prices,e.props.sumLiq),"%")):r.a.createElement("tr",{key:a.id},r.a.createElement("td",null,"Loading!")):r.a.createElement("tr",{key:Math.random()},r.a.createElement("td",null,"Loading!"))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"ui horizontal divider"},"Your Selected Pools"),r.a.createElement("table",{className:"ui selectable inverted striped celled table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"center aligned"},"Pool Address"),r.a.createElement("th",{className:"center aligned ten wide"},"Assets"),r.a.createElement("th",{className:"center aligned"},"Swap Fee"),r.a.createElement("th",{className:"center aligned"},"Total Liquidity"),r.a.createElement("th",{className:"center aligned"},"24h Volume"),r.a.createElement("th",{className:"center aligned"},"24h Fees"),r.a.createElement("th",{className:"center aligned"},"Annual BAL"),r.a.createElement("th",{className:"center aligned"},"APY"))),r.a.createElement("tbody",null,this.renderTable())))}}]),a}(r.a.Component),J=Object(f.b)((function(e,t){return{portfolio:t.match.params.portfolio,pools:e.poolReducer,prices:e.coingecko,checkPortfolio:e.portfolio,sumLiq:e.sumLiq,allPools:e.balancer.pools}}),{fetchPool:S,selectPool:x,deletePool:F,deletePools:T})(G),X=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).checker=function(t){if(!e.props.form)return 1;if(!e.props.form.values)return 1;var a,n=e.props.form.values.address.toLowerCase(),r=Object(L.a)(t.shares);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=parseFloat(o.balance);if(o.userAddress.id===n&&0!==l)return l/parseFloat(t.totalShares).toFixed(4)}}catch(c){r.e(c)}finally{r.f()}return 0},e}return Object(u.a)(a,[{key:"renderOwnership",value:function(e){return 1===e?"-":(100*e).toFixed(2)}},{key:"render",value:function(){var e=this;return this.props.pools&&this.props.prices&&this.props.portfolio&&this.props.sumLiq>138683236?this.props.pools.map((function(t){var a=e.checker(t);return 0===a?null:0!==parseInt(Q(t,e.props.prices))?-1===e.props.portfolio.indexOf(t.id)?r.a.createElement("tr",{key:t.id},r.a.createElement("td",{className:"center aligned","data-label":"Pool Address"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://pools.balancer.exchange/#/pool/".concat(t.id)},r.a.createElement("button",{className:"ui small inverted floating compact centered button"},"...",t.id.slice(-8))," "),r.a.createElement("button",{onClick:function(){return e.props.selectPool(t.id)},className:"ui small inverted floating compact centered button"},"Add")),r.a.createElement("td",{className:"center aligned selectable","data-label":"Assets",onClick:function(){return i.push("/pool/".concat(t.id))}},r.a.createElement(k.PieChart,{className:"ui tiny circular image",data:B(t),onClick:function(){return i.push("/pool/".concat(t.id))}}),r.a.createElement("i",{className:"icon long arrow alternate right"}),I(t).join("  ")),r.a.createElement("td",{className:"center aligned","data-label":"Swap Fee"},(100*t.swapFee).toFixed(2),"%"),r.a.createElement("td",{className:"center aligned","data-label":"Total Liquidity"},"$",U(t,e.props.prices,a)),r.a.createElement("td",{className:"center aligned","data-label":"24h Volume"},"$",$(t,a)),r.a.createElement("td",{className:"center aligned","data-label":"24h Fees"},"$",R(t,a)),r.a.createElement("td",{className:"center aligned","data-label":"Annual BAL"},Number(Y(t,e.props.prices,e.props.sumLiq,a).toFixed(0)).toLocaleString()),r.a.createElement("td",{className:"center aligned","data-label":"APY"},H(t,e.props.prices,e.props.sumLiq),"%"),r.a.createElement("td",{className:"center aligned","data-label":"User %"},e.renderOwnership(a),"%")):r.a.createElement("tr",{className:"active",key:t.id},r.a.createElement("td",{className:"center aligned","data-label":"Pool Address"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://pools.balancer.exchange/#/pool/".concat(t.id)},r.a.createElement("button",{className:"ui small floating compact centered button"},"...",t.id.slice(-8))," "),r.a.createElement("button",{onClick:function(){return e.props.deletePool(t.id)},className:"ui small floating compact centered button"},"Remove")),r.a.createElement("td",{className:"center aligned selectable","data-label":"Assets",onClick:function(){return i.push("/pool/".concat(t.id))}},r.a.createElement(k.PieChart,{className:"ui tiny circular image",data:B(t),onClick:function(){return i.push("/pool/".concat(t.id))}}),r.a.createElement("i",{className:"icon long arrow alternate right"}),I(t).join("  ")),r.a.createElement("td",{className:"center aligned","data-label":"Swap Fee"},(100*t.swapFee).toFixed(2),"%"),r.a.createElement("td",{className:"center aligned","data-label":"Total Liquidity"},"$",U(t,e.props.prices,a)),r.a.createElement("td",{className:"center aligned","data-label":"24h Volume"},"$",$(t,a)),r.a.createElement("td",{className:"center aligned","data-label":"24h Fees"},"$",R(t,a)),r.a.createElement("td",{className:"center aligned","data-label":"Annual BAL"},Number(Y(t,e.props.prices,e.props.sumLiq,a).toFixed(0)).toLocaleString()),r.a.createElement("td",{className:"center aligned","data-label":"APY"},H(t,e.props.prices,e.props.sumLiq),"%"),r.a.createElement("td",{className:"center aligned","data-label":"User %"},e.renderOwnership(a),"%")):null})):r.a.createElement("tr",null,r.a.createElement("td",null,"Loading"))}}]),a}(r.a.Component),K=Object(f.b)((function(e){return{pools:e.balancer.pools,prices:e.coingecko,portfolio:e.portfolio,sumLiq:e.sumLiq,form:e.form.UserInput}}),{selectPool:x,deletePool:F})(X),Z=a(237),ee=a(236),te=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).renderInput=function(t){var a=t.input,n=t.label,o=t.meta,l="field ".concat(o.error&&o.touched?"error":"");return r.a.createElement("div",{className:l},r.a.createElement("label",null,n),r.a.createElement("input",Object.assign({},a,{autoComplete:"off"})),e.renderError(o))},e.onSubmit=function(t){e.props.onSubmit(t)},e}return Object(u.a)(a,[{key:"renderError",value:function(e){var t=e.error;if(e.touched&&t)return r.a.createElement("div",{className:"ui error message"},r.a.createElement("div",{className:"header"},t))}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit),className:"ui inverted form error"},r.a.createElement(Z.a,{name:"address",component:this.renderInput,type:"text",label:"Filter by wallet address"}))}}]),a}(r.a.Component),ae=Object(ee.a)({form:"UserInput",validate:function(e){return{}}})(te),ne=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(e){e.address},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ae,{onSubmit:this.onSubmit}),r.a.createElement("div",{className:"ui inverted horizontal divider"},"List of All Pools"),r.a.createElement("table",{className:"ui selectable padded inverted striped celled table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"center aligned"},"Pool Address"),r.a.createElement("th",{className:"center aligned ten wide"},"Assets"),r.a.createElement("th",{className:"center aligned"},"Swap Fee"),r.a.createElement("th",{className:"center aligned"},"Total Liquidity"),r.a.createElement("th",{className:"center aligned"},"24h Volume"),r.a.createElement("th",{className:"center aligned"},"24h Fees"),r.a.createElement("th",{className:"center aligned"},"Annual BAL"),r.a.createElement("th",{className:"center aligned"},"APY"),r.a.createElement("th",{className:"center aligned"},"User %"))),r.a.createElement("tbody",null,r.a.createElement(K,null))))}}]),a}(r.a.Component),re=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.fetchPool(this.props.viewPool);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.deletePools()}},{key:"renderAssetValue",value:function(e){var t=this.props.pool[this.props.viewPool].tokens[e],a=t.address;if(void 0===this.props.prices[a])return"0";var n=this.props.prices[a].usd,r=parseFloat(t.balance);return Number((n*r).toFixed(2)).toLocaleString()}},{key:"renderAssetPrice",value:function(e){var t=this.props.pool[this.props.viewPool].tokens[e].address;if(void 0===this.props.prices[t])return"0";var a=this.props.prices[t].usd;return Number(a).toLocaleString()}},{key:"renderAssetTable",value:function(){var e=this;return I(this.props.pool[this.props.viewPool]).map((function(t,a){var n=t.split(" ");return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:"center aligned","data-label":"Asset"},n[1]),r.a.createElement("td",{className:"center aligned","data-label":"Price"},"$",e.renderAssetPrice(a)),r.a.createElement("td",{className:"center aligned","data-label":"Weight"},n[0]),r.a.createElement("td",{className:"center aligned","data-label":"Value"},"$",e.renderAssetValue(a)))}))}},{key:"render",value:function(){return this.props.pool[this.props.viewPool]&&this.props.prices&&this.props.sumLiq>138683236?r.a.createElement("div",null,r.a.createElement("div",{className:"ui horizontal divider"},"Pool Viewer: ",this.props.viewPool),r.a.createElement("table",{className:"ui selectable inverted striped celled table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"center aligned"},"Total Liquidity"),r.a.createElement("th",{className:"center aligned"},"Swap Fee"),r.a.createElement("th",{className:"center aligned"},"24h Volume"),r.a.createElement("th",{className:"center aligned"},"24h Fees"),r.a.createElement("th",{className:"center aligned"},"Annual BAL"),r.a.createElement("th",{className:"center aligned"},"APY"))),r.a.createElement("tbody",null,r.a.createElement("tr",{key:"main"},r.a.createElement("td",{className:"center aligned","data-label":"Total Liquidity"},"$",U(this.props.pool[this.props.viewPool],this.props.prices)),r.a.createElement("td",{className:"center aligned","data-label":"Swap Fee"},(100*this.props.pool[this.props.viewPool].swapFee).toFixed(2),"%"),r.a.createElement("td",{className:"center aligned","data-label":"24h Volume"},"$",$(this.props.pool[this.props.viewPool])),r.a.createElement("td",{className:"center aligned","data-label":"24h Fees"},"$",R(this.props.pool[this.props.viewPool])),r.a.createElement("td",{className:"center aligned","data-label":"Annual BAL"},Number(Y(this.props.pool[this.props.viewPool],this.props.prices,this.props.sumLiq).toFixed(0)).toLocaleString()),r.a.createElement("td",{className:"center aligned","data-label":"APY"},H(this.props.pool[this.props.viewPool],this.props.prices,this.props.sumLiq),"%")))),r.a.createElement("table",{className:"ui selectable inverted striped celled table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"center aligned"},"Asset"),r.a.createElement("th",{className:"center aligned"},"Price"),r.a.createElement("th",{className:"center aligned"},"Weight"),r.a.createElement("th",{className:"center aligned"},"Value"))),r.a.createElement("tbody",null,this.renderAssetTable()))):"Loading!"}}]),a}(r.a.Component),oe=Object(f.b)((function(e,t){return{viewPool:t.match.params.viewPool,prices:e.coingecko,pool:e.poolReducer,sumLiq:e.sumLiq,allPools:e.balancer.pools}}),{fetchPool:S,deletePools:T})(re),le=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).adjLiquidity=function(e){var t=n.totalFactor(e),a=parseFloat(U(e,n.props.prices).split(",").join(""));isNaN(a)||(n.sumTotalLiq+=a),isNaN(a*t)||(n.sumTotalAdjLiq+=a*t)},n.totalFactor=function(e){return q(e.swapFee)*_(e)},n.timer=null,n.sumTotalAdjLiq=0,n.sumTotalLiq=0,n.sumVolume=0,n.refreshTimer=3e5,n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.gatherData()}},{key:"gatherData",value:function(){var e=Object(O.a)(N.a.mark((function e(){var t,a,n,r,o,l,c,s,i,p,u,d,m=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.fetchPools();case 2:t=[],a=Object(L.a)(this.props.pools);try{for(a.s();!(n=a.n()).done;){r=n.value,o=Object(L.a)(r.tokens);try{for(o.s();!(l=o.n()).done;)c=l.value,-1===t.indexOf(c.address)&&t.push(c.address)}catch(h){o.e(h)}finally{o.f()}}}catch(h){a.e(h)}finally{a.f()}return s=t.slice(0,t.length/2),i=t.slice(t.length/2),e.next=9,this.props.fetchPrice(s.join(","));case 9:return e.next=11,this.props.fetchPrice(i.join(","));case 11:p=Object(L.a)(this.props.pools);try{for(p.s();!(u=p.n()).done;)d=u.value,this.adjLiquidity(d),this.getTotalVolume(d)}catch(h){p.e(h)}finally{p.f()}this.props.sumAllLiq(this.sumTotalLiq),this.props.sumAllVol(this.sumVolume),this.props.sumLiquidity(this.sumTotalAdjLiq),this.timer=setInterval((function(){m.refreshData()}),this.refreshTimer);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshData",value:function(){var e=Object(O.a)(N.a.mark((function e(){var t,a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearInterval(this.timer),this.sumTotalAdjLiq=0,this.sumTotalLiq=0,this.sumVolume=0,this.props.clearLiquidity(),this.props.deleteAllLiq(),this.props.deleteAllVol(),this.props.deletePrices(),!this.props.portfolioPools||!this.props.poolsList){e.next=27;break}this.props.deletePools(),t=Object(L.a)(this.props.poolsList),e.prev=11,t.s();case 13:if((a=t.n()).done){e.next=19;break}return n=a.value,e.next=17,this.props.fetchPool(n);case 17:e.next=13;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(11),t.e(e.t0);case 24:return e.prev=24,t.f(),e.finish(24);case 27:this.gatherData();case 28:case"end":return e.stop()}}),e,this,[[11,21,24,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"getTotalVolume",value:function(e){var t=e.totalSwapVolume;if(void 0!==e.swaps[0]){var a=t-e.swaps[0].poolTotalSwapVolume;this.sumVolume+=a}}},{key:"render",value:function(){return null}}]),a}(r.a.Component),ce=Object(f.b)((function(e){return{pools:e.balancer.pools,prices:e.coingecko,portfolioPools:e.poolReducer,poolsList:e.portfolio}}),{fetchPools:function(){return function(){var e=Object(O.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j;case 2:a=e.sent,t({type:"FETCH_POOLS",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fetchPrice:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.get("/ethereum?contract_addresses=".concat(e,"&vs_currencies=usd"));case 2:n=t.sent,a({type:"FETCH_PRICE",payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},sumLiquidity:function(e){return function(t){t({type:"SUM_LIQUIDITY",payload:e})}},clearLiquidity:function(){return function(e){e({type:"CLEAR_LIQUIDITY"})}},deletePrices:function(){return function(e){e({type:"DELETE_PRICES"})}},sumAllLiq:function(e){return function(t){t({type:"SUM_ALL_LIQ",payload:e})}},deleteAllLiq:function(){return function(e){e({type:"DELETE_ALL_LIQ"})}},sumAllVol:function(e){return function(t){t({type:"SUM_ALL_VOL",payload:e})}},deleteAllVol:function(){return function(e){e({type:"DELETE_ALL_VOL"})}},deletePools:T,fetchPool:S})(le),se=function(){return r.a.createElement("div",{className:"ui container"},r.a.createElement(ce,null),r.a.createElement(c.b,{history:i},r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/pool/:viewPool",component:oe}),r.a.createElement(c.a,{path:"/portfolio/:portfolio",component:J}),r.a.createElement(c.a,{path:"/",component:ne}))),r.a.createElement(h,null)))},ie=a(6),pe=a(109),ue=a(238),de=a(25),me={pools:null},he={},fe=[],be=a(54),ve={},Ee=Object(ie.c)({balancer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POOLS":return Object(de.a)(Object(de.a)({},e),{},{pools:t.payload.data.pools});default:return e}},coingecko:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRICE":return Object(de.a)(Object(de.a)({},e),t.payload);case"DELETE_PRICES":return{};default:return e}},portfolio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_POOL":var a=e.map((function(e){return e}));return-1===a.indexOf(t.payload)&&a.push(t.payload),a;case"DELETE_POOL":var n=e.filter((function(e){return e!==t.payload}));return n;default:return e}},poolReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POOL":var a=t.payload.data.pools;if(void 0===t.payload.data.pools[0])return e;var n=t.payload.data.pools[0].id;return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},n,a[0]));case"DELETE_POOLS":return{};default:return e}},sumLiq:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUM_LIQUIDITY":var a=parseFloat(e),n=parseFloat(t.payload);return isNaN(a+n)?e:a+n;case"CLEAR_LIQUIDITY":return 0;default:return e}},sumTotalLiq:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUM_ALL_LIQ":var a=parseFloat(e),n=parseFloat(t.payload);return isNaN(a+n)?e:a+n;case"DELETE_ALL_LIQ":return 0;default:return e}},sumVol:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUM_ALL_VOL":var a=parseFloat(e),n=parseFloat(t.payload);return isNaN(a+n)?e:a+n;case"DELETE_ALL_VOL":return 0;default:return e}},form:ue.a}),ge=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ie.d,we=Object(ie.e)(Ee,ge(Object(ie.a)(pe.a)));l.a.render(r.a.createElement(f.a,{store:we},r.a.createElement(se,null)),document.querySelector("#root"))}},[[111,1,2]]]);
//# sourceMappingURL=main.8a9ae918.chunk.js.map